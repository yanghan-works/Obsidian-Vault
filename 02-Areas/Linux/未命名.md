---
tags: 
aliases: 
created: 2025-07-17 22:55
---
ping 命令

`ping` 命令是 [[网络诊断]] 工具箱中最基础、最核心的工具。

它就像一个网络世界的“侦察兵”或声纳系统。你向一个目标（[[IP 地址]] 或 [[域名]]）发送一个“喂，听得到吗？”的信号（ICMP Echo-Request），如果对方在线且愿意回应，就会回你一个“听到了！”的信号（ICMP Echo-Reply）。

通过这个简单的一问一答，我们就能获得丰富的情报。

#### 核心知识点

- [[ping 的核心功能]]
    
- [[使用 ping 进行网络故障排查]]
    
- [[ping 命令的进阶参数]]
    

#### 关联概念

- [[RTT (往返时间)]]
    
- [[丢包率]]
    
- [[IP 地址]]
    
- [[域名]]
    
- [[telnet]]
    
- [[Linux]]
    

## 永久笔记/ping 的核心功能

`ping` 命令这个侦察兵主要能帮你完成三项核心任务：

1. **✅ 确认存活 (Reachability)** 看看目标 [[IP 地址]] 或 [[域名]] 对应的设备是否在线。如果 `ping` 不通，对方可能关机、断网，或是被 [[防火墙]] 拦截了。
    
2. **⏱️ 测量延迟 (Latency)** 计算信号跑一个来回花了多长时间，这就是 [[RTT (往返时间)]]。时间越短，网络延迟越低，玩游戏、看视频就越流畅。
    
3. **📦 检查稳定性 (Stability)** 通过观察一段时间内的 [[丢包率]]，判断网络连接的质量。如果派出去的信号有去无回，说明路况不好，连接不稳定。
    

## 永久笔记/使用 ping 进行网络故障排查

> [!tip] 侦探四步法 当你连不上网时，不要慌！用 `ping` 命令走完这四步，就能像侦探一样定位问题所在。

#### 第一步：Ping 自己 (检查本机网卡)

```
ping 127.0.0.1
```

- **目标**：`127.0.0.1` 是 [[本地回环地址 (127.0.0.1)]]，永远指向你自己的电脑。
    
- **✅ 通了**：说明你电脑的“网卡”是好的，软件层面没问题。
    
- **❌ 不通**：问题出在你的电脑系统或网卡驱动上。
    

#### 第二步：Ping 网关 (检查局域网)

```
# 常见的网关地址，具体看路由器背面
ping 192.168.1.1
```

- **目标**：[[路由器网关]]，是你家所有设备上网的出口。
    
- **✅ 通了**：说明你的电脑到路由器之间的连接（Wi-Fi或网线）是好的。
    
- **❌ 不通** (但第一步通了)：问题在电脑和路由器之间，检查Wi-Fi密码、网线是否插好。
    

#### 第三步：Ping 公网IP (检查外网连接)

```
# 8.8.8.8 是谷歌提供的公共DNS服务器，非常稳定
ping 8.8.8.8
```

- **目标**：一个稳定可靠的公网 [[IP 地址]]。
    
- **✅ 通了**：恭喜，你家的宽带已经成功连接到互联网！
    
- **❌ 不通** (但第二步通了)：问题出在你家宽带上（路由器 -> 运营商），可以重启光猫/路由器，或直接呼叫运营商报修。
    

#### 第四步：Ping 目标域名 (检查目标服务)

```
ping www.bilibili.com
```

- **目标**：你最终想访问的网站。
    
- **✅ 通了**：网络是好的，网站打不开可能是浏览器缓存、DNS污染或其他应用层问题。
    
- **❌ 不通** (但第三步通了)：问题大概率出在目标网站的服务器，或者从你到它之间的某段网络拥堵了。
    

## 永久笔记/RTT (往返时间)

**RTT (Round-Trip Time)**，即往返时间，是衡量 [[网络延迟]] 的核心指标。

它记录了从你发送一个 `ping` 包到收到对方回应所经过的总时间。这个值通常以毫秒（ms）为单位。

- **低 RTT**：意味着数据传输快，延迟低。在线游戏、视频通话体验会很好。
    
- **高 RTT**：意味着延迟高，俗称“卡”。玩游戏时人物会漂移，视频通话会音画不同步。
    

## 永久笔记/丢包率

**丢包率 (Packet Loss Rate)** 是衡量 [[网络稳定性]] 的核心指标。

它指的是在一次通信中，发送的数据包未能成功抵达目的地的比例。

- **低丢包率 (接近0%)**：网络连接非常稳定可靠。
    
- **高丢包率**：网络极不稳定。会导致视频马赛克、通话断断续续、网页加载不全。
    

## 永久笔记/ping 命令的进阶参数

除了基本用法，`ping` 命令还提供了一些参数，可以进行更精细的 [[网络诊断]]。

- [[ping -s (指定数据包大小)]]
    
- [[ping -c (指定发送次数)]]
    

## 永久笔记/ping -s (指定数据包大小)

`-s` (size) 参数允许你自定义发送的 `ping` 包大小。

#### 使用场景

1. **模拟大流量**：当你感觉下载大文件或看高清视频卡顿时，可以用大包测试，如 `ping -s 1400 8.8.8.8`。如果大包的 [[RTT (往返时间)]] 飙升或 [[丢包率]] 很高，说明网络对大数据处理能力较弱。
    
2. **检测 MTU**：用于探测网络的 [[MTU (最大传输单元)]]。
    

## 永久笔记/ping -c (指定发送次数)

`-c` (count) 参数用于指定 `ping` 命令执行的次数。

> [!info] 系统差异
> 
> - 在 [[Linux]]/macOS 上，`ping` 默认会一直执行，需要用 `Ctrl+C` 停止。
>     
> - 在 Windows 上，`ping` 默认只执行 4 次。想持续执行需要用 `-t` 参数。
>     

#### 使用场景

1. **快速测试**：在 [[Linux]]/macOS 上，若只想测试几次，可用 `ping -c 5 8.8.8.8`。
    
2. **持续监控**：怀疑网络时好时坏时，让 `ping` 一直运行，观察 [[RTT (往返时间)]] 和 [[丢包率]] 的变化。
    

## 永久笔记/网络诊断

[[网络诊断]] 就像医生看病，需要一套组合拳。`ping` 是最基础的听诊器，但我们还有其他工具。

- **[[ping 命令]]**：问“对方在不在家？” (检查主机存活)
    
- **[[telnet]]**：问“能敲开他家特定房间的门吗？” (检查端口开放)
    
- **`traceroute` (或 `tracert`)**：问“去他家的路是怎么走的？路过了哪些地方？” (追踪路由路径)
    

当遇到 [[数据库连接不上]] 这类问题时，第一步就应该是 `ping` 数据库服务器的 [[IP 地址]]，这属于标准的[[网络故障排查]]流程。

### 占位笔记 (待你未来填充)

> 下面这些是根据你的笔记内容提取出的关联概念，现在它们是空的，但链接已经建好。未来当你学习到这些知识时，就可以直接在这些笔记里填充内容，让你的知识网络越来越茂盛！

## 永久笔记/telnet

## 永久笔记/IP 地址

## 永久笔记/域名

## 永久笔记/Linux

## 永久笔记/本地回环地址 (127.0.0.1)

## 永久笔记/路由器网关

## 永久笔记/MTU (最大传输单元)

## 永久笔记/防火墙

## 永久笔记/数据库连接不上